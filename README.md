# ibus-qikai (å¯å¼€æ‰‹å†™è¯†åˆ«)

`ibus-qikai` æ˜¯ä¸€ä¸ªåŸºäº **ONNX Runtime** å’Œ **PP-OCRv5** æ¨¡å‹æ„å»ºçš„é«˜æ€§èƒ½ã€å…¨ç¦»çº¿æ‰‹å†™è¯†åˆ«åº“ã€‚å®ƒä¸“ä¸º Web å’Œ Node.js ç¯å¢ƒè®¾è®¡ï¼Œæä¾›äº†ä»åº•å±‚æ¨ç†å¼•æ“åˆ°é«˜å±‚è¾“å…¥æ³• UI çš„å®Œæ•´è§£å†³æ–¹æ¡ˆã€‚

[![License: ISC](https://img.shields.io/badge/License-ISC-blue.svg)](https://opensource.org/licenses/ISC)
[![pnpm](https://img.shields.io/badge/maintained%20with-pnpm-cc00ff.svg)](https://pnpm.io/)

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸš€ **é«˜æ€§èƒ½æ¨ç†**ï¼šåŸºäºç™¾åº¦ PaddleOCRv5 ç§»åŠ¨ç«¯è¯†åˆ«æ¨¡å‹ï¼Œå…¼é¡¾é€Ÿåº¦ä¸ç²¾åº¦ã€‚
- ğŸŒ **å…¨ç¦»çº¿è¿è¡Œ**ï¼šæ‰€æœ‰èµ„æºï¼ˆæ¨¡å‹ã€å­—å…¸ã€WASMï¼‰å‡å¯æœ¬åœ°åŒ–éƒ¨ç½²ï¼Œæ— éœ€è”ç½‘å³å¯ç§’å¼€è¯†åˆ«ã€‚
- âš¡ **ç¡¬ä»¶åŠ é€Ÿ**ï¼šè‡ªåŠ¨æ£€æµ‹å¹¶åˆ©ç”¨ **WebGPU**ã€WebGL æˆ– WASM SIMD è¿›è¡Œæ¨ç†åŠ é€Ÿã€‚
- ğŸ¯ **æ™ºèƒ½é¢„å¤„ç†**ï¼šå†…ç½®è‡ªåŠ¨å»ç™½è¾¹ï¼ˆBounding Boxï¼‰ã€ç­‰æ¯”ä¾‹ç¼©æ”¾å’Œå±…ä¸­å¯¹é½ï¼Œå¤§å¹…æå‡éæ ‡å‡†ä¹¦å†™çš„è¯†åˆ«ç‡ã€‚
- ğŸ” **å¤šå€™é€‰æ”¯æŒ**ï¼šæ”¯æŒè¿”å› Top-K å€™é€‰ç»“æœåŠç½®ä¿¡åº¦è¯„åˆ†ï¼Œé€‚åˆè¾“å…¥æ³•é›†æˆåœºæ™¯ã€‚
- ğŸ“¦ **æ¨¡å—åŒ–è®¾è®¡**ï¼šé‡‡ç”¨ Monorepo ç»“æ„ï¼Œé€»è¾‘ä¸æ¨¡å‹è§£è€¦ï¼Œæ”¯æŒæŒ‰éœ€å¼•ç”¨ã€‚

## ğŸ“‚ è½¯ä»¶åŒ…è¯´æ˜

æœ¬é¡¹ç›®åŒ…å«ä»¥ä¸‹ä¸‰ä¸ªä¸»è¦ NPM åŒ…ï¼š

| åŒ…å | è¯´æ˜ |
| :--- | :--- |
| [`@ibus-qikai/core`](./packages/core) | **æ ¸å¿ƒå¼•æ“**ã€‚åŒ…å«å›¾åƒé¢„å¤„ç†å’Œ ONNX æ¨ç†é€»è¾‘ï¼Œä¸å«æ¨¡å‹ã€‚ |
| [`@ibus-qikai/models`](./packages/models) | **æ¨¡å‹èµ„æº**ã€‚å†…ç½® PP-OCRv5 æƒé‡æ–‡ä»¶å’Œå¸¸ç”¨æ±‰å­—å­—å…¸ã€‚ |
| [`ibus-qikai`](./packages/ibus-qikai) | **èšåˆåŒ…**ã€‚å°è£…äº†ä¸Šè¿°ä¸¤è€…ï¼Œæä¾›å¼€ç®±å³ç”¨çš„ç®€åŒ– APIã€‚ |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…

```bash
pnpm add ibus-qikai onnxruntime-web
```

### 2. åŸºç¡€ç”¨æ³• (Web)

```typescript
import { HandwritingInput } from 'ibus-qikai';

// 1. åˆå§‹åŒ–
const input = new HandwritingInput({ topK: 10 });
await input.init(); // è‡ªåŠ¨åŠ è½½å†…ç½®æ¨¡å‹

// 2. è¯†åˆ« Canvas å†…å®¹
const canvas = document.getElementById('myCanvas');
const result = await input.recognize(canvas);

console.log(result.candidates);
// è¾“å‡ºç¤ºä¾‹: [{ character: 'å¼ ', score: 0.98 }, { character: 'é•·', score: 0.01 }, ...]
```

## ğŸ¤– è‡ªåŠ¨åŒ–æµç¨‹ (CI/CD)

é¡¹ç›®é›†æˆäº† GitHub Actionsï¼Œæ”¯æŒä»¥ä¸‹æµç¨‹ï¼š

- **è‡ªåŠ¨åŒ–æµ‹è¯•**ï¼šæ¯æ¬¡æ¨é€ä»£ç éƒ½ä¼šåœ¨ Ubuntu ç¯å¢ƒä¸‹è¿è¡Œæ ¸å¿ƒåº“çš„å•å…ƒæµ‹è¯•ã€‚
- **è‡ªåŠ¨éƒ¨ç½²æ¼”ç¤º**ï¼šä»£ç åˆå¹¶è‡³ `main` åˆ†æ”¯åï¼Œæ¼”ç¤ºé¡µé¢ä¼šè‡ªåŠ¨æ›´æ–°åˆ° GitHub Pagesã€‚
- **è‡ªåŠ¨å‘å¸ƒåŒ…**ï¼šè‹¥æäº¤ä¿¡æ¯åŒ…å« `release` å…³é”®å­—ï¼ˆå¦‚ `feat: release version 1.0.1`ï¼‰ï¼ŒCI ä¼šè‡ªåŠ¨æ„å»ºå¹¶å‘å¸ƒåŒ…è‡³ NPMã€‚
  - *æ³¨æ„*ï¼šéœ€è¦åœ¨ GitHub ä»“åº“çš„ Secrets ä¸­é…ç½® `NPM_TOKEN`ã€‚

## ğŸ›  å¼€å‘ä¸è°ƒè¯•

å¦‚æœä½ æƒ³åœ¨æœ¬åœ°è¿è¡Œæ¼”ç¤ºé¡µé¢æˆ–å‚ä¸å¼€å‘ï¼š

```bash
# å®‰è£…ä¾èµ–
pnpm install

# å¯åŠ¨æœ¬åœ°æ¼”ç¤ºé¡µé¢ (Vite)
pnpm demo:dev

# è¿è¡Œå•å…ƒæµ‹è¯•
pnpm --filter @ibus-qikai/core test

# å…¨é‡æ„å»º
pnpm build
```

## ğŸŒ GitHub Pages éƒ¨ç½²

æœ¬é¡¹ç›®å·²é€‚é… GitHub Pagesã€‚æ„å»ºåçš„ `demo/dist` ç›®å½•å¯ç›´æ¥éƒ¨ç½²è‡³é™æ€ç½‘ç«™æ‰˜ç®¡æœåŠ¡ã€‚å®ƒæ”¯æŒå­è·¯å¾„éƒ¨ç½²ï¼Œå¹¶èƒ½è‡ªåŠ¨å¤„ç†å…¨ç¦»çº¿èµ„æºçš„è·¯å¾„æ˜ å°„ã€‚

## ğŸ“ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº [ISC License](./LICENSE) å¼€æºã€‚

---
*Powered by ibus-qikai & PaddleOCR*
