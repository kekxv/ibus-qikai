<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ibus-qikai - 启开输入法演示</title>
    <style>
        :root { --primary: #007aff; --bg: #f2f2f7; --card: #ffffff; --border: #d1d1d6; --key-bg: #ffffff; --key-active: #d1d1d6; }
        body { font-family: -apple-system, system-ui, sans-serif; margin: 0; padding: 10px; background: var(--bg); display: flex; justify-content: center; align-items: center; min-height: 100vh; color: #1c1c1e; }
        
        .main-card { background: var(--card); width: 100%; max-width: 450px; border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.08); overflow: hidden; display: flex; flex-direction: column; position: relative; }
        
        /* Header */
        .header { padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--bg); }
        .header h1 { font-size: 18px; margin: 0; font-weight: 600; }
        .github-link { color: #8e8e93; text-decoration: none; font-size: 14px; display: flex; align-items: center; gap: 5px; }
        .github-link:hover { color: var(--primary); }

        /* Display Area */
        .display-box { padding: 15px; background: #fff; position: relative; }
        #input-display { font-size: 24px; min-height: 36px; border-bottom: 2px solid var(--primary); padding-bottom: 5px; word-break: break-all; margin-bottom: 10px; }
        #pinyin-indicator { color: var(--primary); font-size: 14px; font-weight: 500; height: 18px; }

        /* Candidate Bar */
        #candidate-bar { height: 50px; display: flex; align-items: center; overflow-x: auto; overflow-y: hidden; border-top: 1px solid var(--bg); border-bottom: 1px solid var(--bg); padding: 0 10px; gap: 8px; scrollbar-width: none; }
        #candidate-bar::-webkit-scrollbar { display: none; }
        .candidate-item { min-width: 44px; height: 40px; display: flex; align-items: center; justify-content: center; font-size: 22px; cursor: pointer; border-radius: 8px; transition: 0.2s; flex-shrink: 0; }
        .candidate-item:active { background: var(--bg); color: var(--primary); transform: scale(0.9); }

        /* Toggle Tabs */
        .tabs { display: flex; background: var(--bg); margin: 10px; border-radius: 10px; padding: 3px; }
        .tab { flex: 1; text-align: center; padding: 8px; font-size: 14px; cursor: pointer; border-radius: 8px; transition: 0.3s; color: #8e8e93; }
        .tab.active { background: white; color: var(--primary); box-shadow: 0 2px 8px rgba(0,0,0,0.05); font-weight: 600; }

        /* Panels */
        .panel { padding: 10px; display: none; }
        .panel.active { display: block; }

        /* Handwriting Panel */
        #canvas-container { width: 100%; aspect-ratio: 1.5 / 1; background: #fff; border: 1px solid var(--border); border-radius: 12px; overflow: hidden; touch-action: none; position: relative; transition: border-color 0.3s, box-shadow 0.3s; }
        #canvas-container.active { border-color: var(--primary); box-shadow: 0 0 8px rgba(0,122,255,0.2); }
        canvas { width: 100%; height: 100%; }

        /* Keyboard Panel */
        .keyboard { display: flex; flex-direction: column; gap: 6px; user-select: none; }
        .kb-row { display: flex; justify-content: center; gap: 4px; }
        .key { background: var(--key-bg); border-radius: 5px; height: 42px; min-width: 32px; flex: 1; display: flex; align-items: center; justify-content: center; font-size: 18px; box-shadow: 0 1px 2px rgba(0,0,0,0.1); cursor: pointer; transition: 0.1s; }
        .key:active { background: var(--key-active); transform: translateY(2px); }
        .key.wide { flex: 1.5; font-size: 14px; background: #adb5bd; color: white; }
        .key.space { flex: 5; }

        /* Controls */
        .bottom-actions { padding: 10px; display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .btn { padding: 12px; border: none; border-radius: 10px; font-size: 14px; font-weight: 600; cursor: pointer; transition: 0.2s; text-align: center; }
        .btn-gray { background: #e5e5ea; color: #1c1c1e; }
        .btn-primary { background: var(--primary); color: white; }
        .btn:active { transform: scale(0.98); }

        .loading-overlay { position: absolute; inset: 0; background: rgba(255,255,255,0.9); z-index: 100; display: flex; flex-direction: column; align-items: center; justify-content: center; border-radius: 20px; }
        .spinner { width: 30px; height: 30px; border: 3px solid var(--bg); border-top-color: var(--primary); border-radius: 50%; animation: spin 1s linear infinite; margin-bottom: 10px; }
        @keyframes spin { to { transform: rotate(360deg); } }
    </style>
  <script type="module" crossorigin src="./assets/index-XPpbxyS9.js"></script>
</head>
<body>
    <div class="main-card">
        <div id="loader" class="loading-overlay">
            <div class="spinner"></div>
            <div id="loader-text">正在初始化离线引擎...</div>
        </div>

        <div class="header">
            <h1>ibus-qikai</h1>
            <a href="https://github.com/kekxv/ibus-qikai" target="_blank" class="github-link">
                GitHub ➔
            </a>
        </div>

        <div class="display-box">
            <div id="pinyin-indicator"></div>
            <div id="input-display">|</div>
        </div>

        <div id="candidate-bar">
            <span style="color: #c7c7cc; font-size: 14px; margin: auto;">等待输入...</span>
        </div>

        <div class="tabs">
            <div class="tab active" data-target="handwriting-panel">手写输入</div>
            <div class="tab" data-target="keyboard-panel">拼音键盘</div>
        </div>

        <!-- 手写面板 -->
        <div id="handwriting-panel" class="panel active">
            <div id="canvas-container">
                <canvas id="canvas"></canvas>
            </div>
        </div>

        <!-- 键盘面板 -->
        <div id="keyboard-panel" class="panel">
            <div class="keyboard" id="keyboard">
                <!-- 第一行 -->
                <div class="kb-row">
                    <div class="key">q</div><div class="key">w</div><div class="key">e</div><div class="key">r</div><div class="key">t</div>
                    <div class="key">y</div><div class="key">u</div><div class="key">i</div><div class="key">o</div><div class="key">p</div>
                </div>
                <!-- 第二行 -->
                <div class="kb-row" style="padding: 0 5%">
                    <div class="key">a</div><div class="key">s</div><div class="key">d</div><div class="key">f</div><div class="key">g</div>
                    <div class="key">h</div><div class="key">j</div><div class="key">k</div><div class="key">l</div>
                </div>
                <!-- 第三行 -->
                <div class="kb-row">
                    <div class="key wide" id="kb-clear">清空</div>
                    <div class="key">z</div><div class="key">x</div><div class="key">c</div><div class="key">v</div>
                    <div class="key">b</div><div class="key">n</div><div class="key">m</div>
                    <div class="key wide" id="kb-back">退格</div>
                </div>
                <!-- 第四行 -->
                <div class="kb-row">
                    <div class="key space" id="kb-space">Space</div>
                </div>
            </div>
        </div>

        <div class="bottom-actions">
            <button id="clearAllBtn" class="btn btn-gray">重置全部</button>
            <button id="copyBtn" class="btn btn-primary">复制结果</button>
        </div>
    </div>

</body>
</html>
